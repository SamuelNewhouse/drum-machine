(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){},22:function(e,t,n){e.exports=n.p+"static/media/first.2c569205.svg"},23:function(e,t,n){e.exports=n.p+"static/media/play3.b3415477.svg"},24:function(e,t,n){e.exports=n.p+"static/media/pause2.c81c13c5.svg"},25:function(e,t,n){e.exports=n.p+"static/media/record.4e024e14.svg"},26:function(e,t,n){e.exports=n.p+"static/media/last.a47bad7f.svg"},27:function(e,t,n){e.exports=n.p+"static/media/copy.80d3557e.svg"},28:function(e,t,n){e.exports=n.p+"static/media/bin.ab7f548c.svg"},29:function(e,t,n){e.exports=n.p+"static/media/volume-increase.6d539866.svg"},30:function(e,t,n){e.exports=n.p+"static/media/volume-decrease.5c9e5972.svg"},31:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),i=n.n(o),c=n(11),u=n(20),l=n(1),s=n(9),d=n(2),m="PLAY_PAD",p="END_PAD",f="RECORD_PAD",b="PLAY_ENTRY",v="END_ENTRY",g="EDIT_ENTRY",y="ADD_ENTRY",E="DELETE_ENTRY",O="DELETE_ALL_ENTRIES",D="ADD_TIMEOUT",j="CLEAR_ALL_TIMEOUTS",h="SET_RECORDING_STATE",R="SET_RECORDING_POSITION",w="SET_VOLUME",k="PLAYING",N="PAUSED",S="RECORDING",T="EDITING";function _(e){return{type:R,position:e}}function P(e){return function(t,n){e!==n().recordingState&&t({type:j}),t({type:h,recordingState:e})}}function C(e){return function(t,n){t(function(e){return{type:m,letter:e}}(e)),setTimeout(function(){return t(function(e){return{type:p,letter:e}}(e))},100);var r=n(),a=r.recordingState,o=r.position;a===S&&t(function(e){return{type:f,letter:e}}(e)),a!==k&&a!==S||t(function(e){return function(t){t(function(e){return{type:b,position:e}}(e)),setTimeout(function(){return t(function(e){return{type:v,position:e}}(e))},200)}}(o))}}function M(){return function(e,t){var n=t();n.position>=n.recordingData.length&&e(_(0)),e(P(k)),e(function e(){return function(t,n){var r=n(),a=r.recordingData,o=r.recordingState,i=r.position;if(o===k)if(i>=a.length)t(P(N)),t(_(0));else{var c=a[i],u=c.letter,l=c.delay;t(C(u));var s=setTimeout(function(){t(_(i+1)),t(e())},l);t({type:D,timeout:s})}else console.log("TEST: continuePlayRecording called while not playing")}}())}}var x,A="https://s3.amazonaws.com/freecodecamp/drums/",I=new Map([["Q",{id:"closed-hh",url:A+"Cev_H2.mp3"}],["W",{id:"open-hh",url:A+"Dsc_Oh.mp3"}],["E",{id:"shaker",url:A+"Give_us_a_light.mp3"}],["A",{id:"clap",url:A+"Heater-6.mp3"}],["S",{id:"side-stick",url:A+"side_stick_1.mp3"}],["D",{id:"snare",url:A+"Brk_Snr.mp3"}],["Z",{id:"punchy-kick",url:A+"punchy_kick_1.mp3"}],["X",{id:"kick",url:A+"RP4_KICK_1.mp3"}],["C",{id:"kick-n-hat",url:A+"Kick_n_Hat.mp3"}]]),L={recordingData:[],recordingState:N,volume:100,position:0,lastDrumPadTime:null,lastDrumPad:null,timeouts:[]},F=!0,U=!1,V=void 0;try{for(var Y,B=I.keys()[Symbol.iterator]();!(F=(Y=B.next()).done);F=!0){var G=Y.value;L[G]=""}}catch(Fe){U=!0,V=Fe}finally{try{F||null==B.return||B.return()}finally{if(U)throw V}}var H=(x={},Object(d.a)(x,m,function(e,t){var n,r=(n={},Object(d.a)(n,t.letter,"pressed"),Object(d.a)(n,"lastDrumPad",t.letter),n);return Object.assign({},e,r)}),Object(d.a)(x,p,function(e,t){var n=Object(d.a)({},t.letter,"");return Object.assign({},e,n)}),Object(d.a)(x,f,function(e,t){var n=Date.now(),r=n-(e.lastDrumPadTime||n),a={name:I.get(t.letter).id,letter:t.letter,playing:!1,delay:r},o=Object(s.a)(e.recordingData);o.splice(e.position,0,a);var i={recordingData:o,lastDrumPadTime:n,position:e.position+1};return Object.assign({},e,i)}),Object(d.a)(x,b,function(e,t){var n=Object(s.a)(e.recordingData);n[t.position].playing=!0;var r={recordingData:n};return Object.assign({},e,r)}),Object(d.a)(x,v,function(e,t){var n=Object(s.a)(e.recordingData);n[t.position].playing=!1;var r={recordingData:n};return Object.assign({},e,r)}),Object(d.a)(x,g,function(e,t){var n=t.data,r=Object(s.a)(e.recordingData),a=r[n.position];a.name=I.get(n.letter).id,a.letter=n.letter,a.delay=n.delay;var o={recordingData:r};return Object.assign({},e,o)}),Object(d.a)(x,y,function(e,t){var n=t.data,r=Object(s.a)(e.recordingData),a={name:I.get(n.letter).id,letter:n.letter,playing:!1,delay:n.delay};r.push(a);var o={recordingData:r};return Object.assign({},e,o)}),Object(d.a)(x,E,function(e,t){var n=Object(s.a)(e.recordingData);n.splice(t.position,1);var r={recordingData:n};return Object.assign({},e,r)}),Object(d.a)(x,O,function(e){return Object.assign({},e,{recordingData:[]})}),Object(d.a)(x,D,function(e,t){var n={timeouts:[].concat(Object(s.a)(e.timeouts),[t.timeout])};return Object.assign({},e,n)}),Object(d.a)(x,j,function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e.timeouts[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;clearTimeout(i)}}catch(Fe){n=!0,r=Fe}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return Object.assign({},e,[])}),Object(d.a)(x,h,function(e,t){var n=t.recordingState,r=e.recordingState,a={recordingState:t.recordingState};return n===S&&r!==S&&(a.lastDrumPadTime=Date.now()),Object.assign({},e,a)}),Object(d.a)(x,R,function(e,t){var n={position:t.position};return Object.assign({},e,n)}),Object(d.a)(x,w,function(e,t){var n={volume:t.volume};return Object.assign({},e,n)}),x),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=H[t.type];return n?n(e,t):e},J=n(3),Q=n(4),W=n(6),X=n(5),q=n(7),z=n(13),Z=function(e){function t(e){var n;return Object(J.a)(this,t),(n=Object(W.a)(this,Object(X.a)(t).call(this,e))).buttonRef=a.a.createRef(),n.audioRef=a.a.createRef(),n}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.pressed,n=e.volume;t&&(this.buttonRef.current.focus(),this.audioRef.current.currentTime=0,this.audioRef.current.play()),this.audioRef.current.volume=n}},{key:"render",value:function(){var e=this.props,t=e.letter,n=e.id,r=e.url,o=e.pressed,i=e.playPad;return a.a.createElement("button",{type:"button",id:n,className:"drum-pad btn "+o,onMouseDown:function(){i(t)},ref:this.buttonRef},t,a.a.createElement("audio",{id:t,className:"clip",src:r,ref:this.audioRef}))}}]),t}(r.Component),$=Object(l.b)(function(e,t){return{pressed:e[t.letter],volume:e.volume/100}},function(e){return{playPad:function(t){return e(C(t))}}})(Z),ee=function(e){function t(){return Object(J.a)(this,t),Object(W.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"drum-pads"},Array.from(I,function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return a.a.createElement($,{key:n,letter:n,id:r.id,url:r.url})}))}}]),t}(r.Component),te=Object(l.b)(function(e){return e.lastDrumPad?{text:I.get(e.lastDrumPad).id}:{text:"\xa0"}},null)(function(e){var t=e.text;return a.a.createElement("div",{id:"display"}," ",t," ")}),ne=function(e){var t=e.onMouseDown,n=e.alt,r=e.src,o=e.disabled;return a.a.createElement("button",{type:"button",className:"record-button btn",onMouseDown:t,disabled:o},a.a.createElement("img",{alt:n,src:r}))},re=function(e){return e.reduce(function(e,t){return e+t.name+" - "+t.delay+"\n"},"")},ae=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},oe=n(22),ie=n.n(oe),ce=n(23),ue=n.n(ce),le=n(24),se=n.n(le),de=n(25),me=n.n(de),pe=n(26),fe=n.n(pe),be=n(27),ve=n.n(be),ge=n(28),ye=n.n(ge),Ee=function(e){function t(){var e,n;Object(J.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(X.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){e.preventDefault();var t=e.target,r=n.props,a=r.position,o=r.isEditForm,i=r.editEntry,c=r.addEntry,u=r.exitEditMode;o?i(a,t.instrument.value,Number(t.delay.value)):c(t.instrument.value,Number(t.delay.value)),u()},n}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.position,n=e.recordingData,r=e.isEditForm,o=e.exitEditMode,i=e.playPad,c="Q",u=0;if(r){var l=n[t];c=l.letter,u=l.delay}return a.a.createElement("form",{className:"edit-form",onSubmit:this.onSubmit},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"instrument"},"Instrument"),a.a.createElement("select",{className:"custom-select",id:"instrument",defaultValue:c,onChange:function(e){return i(e.target.value)}},Array.from(I,function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return a.a.createElement("option",{key:n,value:n},n+" - "+r.id)}))),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"delay"},"Delay"),a.a.createElement("input",{type:"number",className:"form-control",id:"delay",min:"0",max:"3600000",step:"1",defaultValue:u})),a.a.createElement("input",{className:"btn",type:"submit",value:"Save"}),a.a.createElement("button",{className:"btn",type:"button",onClick:o},"Cancel"))}}]),t}(r.Component),Oe=Object(l.b)(function(e){return{position:e.position,recordingData:e.recordingData,isEditForm:Boolean(e.recordingData[e.position])}},function(e){return{editEntry:function(t,n,r){return e(function(e,t,n){return{type:g,data:{position:e,letter:t,delay:n}}}(t,n,r))},addEntry:function(t,n){return e(function(e,t){return function(n,r){var a=r().position;n({type:y,data:{letter:e,delay:t}}),n(_(a+1))}}(t,n))},exitEditMode:function(){return e(P(N))},playPad:function(t){return e(C(t))}}})(Ee),De=Object(l.b)(null,function(e){return{startEdit:function(){return e(P(T))},deleteEntry:function(t){return e(function(e){return{type:E,position:e}}(t))}}})(function(e){var t=e.componentPosition,n=e.classes,r=e.name,o=e.delay,i=e.isBeingEdited,c=e.onMouseDown,u=e.startEdit,l=e.deleteEntry;return a.a.createElement("div",{className:n,onMouseDown:c},a.a.createElement("span",{className:"info"},r," - ",o),a.a.createElement("button",{type:"button",className:"edit btn",onClick:u},"Edit"),a.a.createElement("button",{type:"button",className:"delete btn",onClick:function(){return l(t)}},"X"),i&&a.a.createElement(Oe,null))}),je=Object(l.b)(null,function(e){return{startEdit:function(){return e(P(T))}}})(function(e){var t=e.classes,n=e.name,r=e.delay,o=e.isBeingEdited,i=e.onMouseDown,c=e.startEdit;return a.a.createElement("div",{className:t,onMouseDown:i},a.a.createElement("span",{className:"info"},n," - ",r),a.a.createElement("button",{type:"button",className:"edit btn",onClick:c},"Add"),o&&a.a.createElement(Oe,null))}),he={name:"\xa0 - \xa0",delay:"\xa0 - \xa0"},Re=function(e){function t(e){var n;return Object(J.a)(this,t),(n=Object(W.a)(this,Object(X.a)(t).call(this,e))).getMouseDownFunction=function(e){var t=n.props,r=t.recordingState,a=t.setRecordingPosition;return r===N?function(){return a(e)}:function(){}},n.makeEntry=function(e){var t=n.props,r=t.recordingData,o=t.recordingState,i=t.position;return function(t,c){var u="entry";return c===i&&(u+=" entry-selected"),r[c]&&r[c].playing&&(u+=" entry-playing"),a.a.createElement(e,{key:c,componentPosition:c,classes:u,name:t.name,delay:t.delay,isBeingEdited:o===T&&c===i,onMouseDown:n.getMouseDownFunction(c)})}},n.recordingDivRef=a.a.createRef(),n}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.recordingDivRef.current,t=this.props.position;if(t<1)e.scrollTo(0,0);else{var n=e.scrollTop,r=n+e.clientHeight,a=e.querySelector(".entry:nth-of-type(".concat(t,")")),o="smooth";(a.offsetTop<n||a.offsetTop>r)&&(o="auto"),a.scrollIntoView({behavior:o})}}},{key:"render",value:function(){var e=this.props,t=e.recordingData,n=e.recordingState;return a.a.createElement("div",{id:"recording",className:"state-"+n.toLowerCase(),ref:this.recordingDivRef},a.a.createElement("div",null,t.map(this.makeEntry(De)),this.makeEntry(je)(he,t.length)))}}]),t}(r.Component),we=Object(l.b)(function(e){return{recordingData:e.recordingData,recordingState:e.recordingState,position:e.position}},function(e){return{setRecordingPosition:function(t){return e(_(t))}}})(Re),ke=function(e){function t(){return Object(J.a)(this,t),Object(W.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recordingData,n=e.recordingState,r=e.playRecording,o=e.pauseRecording,i=e.startRecording,c=e.deleteAllEntries,u=e.setRecordingPosition;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"recording-top-bar",className:"button-bar"},a.a.createElement(ne,{alt:"First",src:ie.a,disabled:n!==N||t.length<1,onMouseDown:function(){return u(0)}}),a.a.createElement(ne,{alt:"Play",src:ue.a,disabled:n!==N||t.length<1,onMouseDown:r}),a.a.createElement(ne,{alt:"Pause",src:se.a,disabled:n===N||n===T,onMouseDown:o}),a.a.createElement(ne,{alt:"Record",src:me.a,disabled:n!==N,onMouseDown:i}),a.a.createElement(ne,{alt:"Last",src:fe.a,disabled:n!==N||t.length<1,onMouseDown:function(){return u(t.length)}})),a.a.createElement(we,null),a.a.createElement("div",{id:"recording-bottom-bar",className:"button-bar"},a.a.createElement(ne,{alt:"Copy",src:ve.a,disabled:n!==N||t.length<1,onMouseDown:function(){return ae(re(t))}}),a.a.createElement(ne,{alt:"Clear",src:ye.a,disabled:n!==N||t.length<1,onMouseDown:c})))}}]),t}(r.Component),Ne=Object(l.b)(function(e){return{recordingData:e.recordingData,recordingState:e.recordingState,position:e.position}},function(e){return{playRecording:function(){return e(M())},pauseRecording:function(){return e(P(N))},startRecording:function(){return e(P(S))},deleteAllEntries:function(){return e(function(e){e({type:O}),e(_(0))})},setRecordingPosition:function(t){return e(_(t))}}})(ke),Se=n(29),Te=n.n(Se),_e=n(30),Pe=n.n(_e),Ce=Object(l.b)(function(e){return{volume:e.volume}},function(e){return{setVolume:function(t){return e(function(e){return{type:w,volume:e}}(t))}}})(function(e){var t=e.volume,n=e.setVolume;return a.a.createElement("div",{id:"volume"},a.a.createElement("img",{src:Pe.a,alt:"Decrease Volume"}),a.a.createElement("input",{type:"range",min:"0",max:"100",value:t,onChange:function(e){return n(e.target.value)}}),a.a.createElement("img",{src:Te.a,alt:"Increase Volume"}))}),Me=function(){return a.a.createElement("div",{id:"drum-machine"},a.a.createElement(ee,null),a.a.createElement(te,null),a.a.createElement(Ne,null),a.a.createElement(Ce,null))},xe=(n(19),function(e,t){var n=e.key.toUpperCase();I.has(n)&&t(n)}),Ae=function(e){function t(){return Object(J.a)(this,t),Object(W.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",function(t){return xe(t,e.props.play)})}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("keydown",function(t){return xe(t,e.props.play)})}},{key:"render",value:function(){return a.a.createElement(Me,{onKeyDown:xe})}}]),t}(r.Component),Ie=Object(l.b)(null,function(e){return{play:function(t){return e(C(t))}}})(Ae),Le=Object(c.c)(K,Object(c.a)(u.a));i.a.render(a.a.createElement(l.a,{store:Le},a.a.createElement(Ie,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.4d0ecc38.chunk.js.map